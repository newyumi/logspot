---
title: 캐시 / 쿠키, 세션 스토리지, 웹 스토리지의 차이에 대해서
date: 4
version: "web"
---

캐시는 데이터나 자원을 빠르게 접근할 수 있도록 임시로 저장하는 메모리나 저장소, 웹페이지 이미지 스크립트 스타일 시트 등의 자원을 개시하여 로딩속도 향상, 네트워크 사용량을 줄이는데 활용

- 브라우저 캐시: 웹 브라우저 내부에 저장되는 캐시로, 사용자가 웹 페이지를 방문할 때 자동으로 다운로드된 자원을 임시로 저장함. 이후에 같은 자원을 요청할 때 서버로부터 다시 받아오는 대신 캐시에서 빠르게 로드.
- CDN 캐시: 콘텐츠 전송 네트워크(Content Delivery Network)에서 제공하는 캐시 서버에 자원을 저장하여 전 세계의 사용자에게 빠르게 콘텐츠를 제공.
- 서버 캐시: 웹 서버에서 동적인 콘텐츠를 미리 계산하거나 저장하여 웹 요청에 더 빠르게 응답할 수 있게 한다.

<br/>

쿠키/세션 스토리지/웹 스토리지는 클라이언트 사이드 저장 메커니즘

- 쿠키: 작은 데이터를 클라이언트에 저장하며, 서버와 클라이언트 간의 상태를 유지합니다.모든 HTTP 요청에 자동으로 포함되어 서버로 전송, 보안 취약, 로그인 상태 유지 등에 사용
- 세션: 서버에 저장되는 상태 정보로, 클라이언트와 서버 간의 연결을 유지합니다.브라우저 세션 종료나 세션 타임아웃 시간까지 유지, 클라이언트에 직접 저장 안하니까 보안적으로 더 안전로그인 정보, 장바구니 정보, 세션 상태 관리 등
- 웹 스토리지: 클라이언트 사이드에 데이터를 저장하는 로컬 저장소로, 브라우저 세션 또는 영구적으로 데이터를 저장한다.웹 애플리케이션 설정, 사용자 정보, 캐시 데이터 등

<br/>

차이점

- 목적: 쿠키와 세션은 상태 정보를 유지하고 관리하는 데, 웹 스토리지는 임시 데이터 저장을 위한 데 사용. / 캐시는 자원의 빠른 로딩을 위해 데이터를 저장하는 데 사용.
- 저장 위치: 쿠키와 웹 스토리지는 클라이언트 측, 세션은 서버 측에 저장. / 캐시는 브라우저의 메모리나 디스크에 저장.

<br/>

참고로 세션 스토리지와 세션은 다름.
세션은 서버측에서 관리되며 사용자의 상태를 서버에서 유지하는 데 사용. 예를 들어, 사용자가 웹사이트에 로그인 했을 때, 로그인 상태임을 유지하는 정보를 서버가 관리함. 클라이언트는 세션 ID를 쿠키에 저장하고, 해당 ID를 통해 서버에서 자신의 세션에 접근한다. 세션은 일반적으로 특정 시간 동안 유효하고, 로그아웃하거나 세션 만료되면 무효화됨.

세션 스토리지는 클라이언트 측에 저장되고, JS를 통해 데이터를 일시적으로 저장하는 데 사용함. JS를 통해서만 접근 가능. 브라우저 탭이나 창이 열려있는 동안에만 유효하고, 닫으면 사라짐. 새로고침해도 초기화되지 않는다. 닫을 때만 초기화. 탭 간에 공유되지 않음.

<br/>

로컬 스토리지와 세션 스토리지의 차이점
로컬 스토리지는 명시적으로 삭제되기 전까지 영구적으로 유지, 반면에 세션 스토리지는 브라우저 탭이나 창이 열려 있는 동안에만 유지.
로컬 스토리지는 탭간 공유, 세션 스토리지는 탭 간 격리
둘 다 용량은 5-10MB를 저장할 수 있다.

<br/>
`JWT(JSON Web Token)를 클라이언트 측에서는 어디에 저장하는 것이 좋을까?`

JWT는 세 부분으로 구성된 문자열이며 각 부분은 점(.)으로 구분된다.

헤더(Header): JWT의 유형과 서명 알고리즘 정보를 담고 있음
페이로드(Payload): 토큰에 담길 실제 데이터. 주로 사용자의 정보나 토큰의 만료 시간 등을 포함하며, 이 부분은 암호화되지 않고 Base64URL로 인코딩된다.
서명(Signature): JWT의 무결성을 검증하기 위한 서명. 헤더와 페이로드를 합쳐서 비밀 키로 서명한다.

일반적으로 사용자가 로그인하면 서버가 해당 사용자의 정보를 기반으로 JWT를 생성하고 클라이언트에 전달, 클라이언트는 토큰을 로컬 스토리지/세션 스토리지/쿠키에 저장한다.
클라이언트는 서버에 요청할 때마다 JWT를 HTTP 헤더의 Authorization 필드에 포함하여 보낸다. 근데 이럴 경우 해당 토큰이 탈취될 수 있어 보안적 문제가 생길 수 있다.

보통 로컬 스토리지나 쿠키에 저장하는데 로컬 스토리지에 저장하면 XSS(교차 사이트 스크립팅) 공격에 취약하다.
쿠키에 저장하면 자동으로 HTTP 요청과 함께 전송되기 떄문에 별도로 헤더에 토큰을 추가할 필요가 없다. HttpOnly 속성을 설정하면 JS에서 쿠키에 접근이 불가하기 떄문에 XSS 공격을 방지할 수 있지만, CSRF(크로스 사이트 요청 위조) 공격에 취약할 수 있다. 추가적 방어 기법이 필요하다.

또는 웹세션에 저장하는 방법도 있다. 웹세션에 저장하면 세션은 서버에서 관리되며 세션 ID가 클라이언트 측 쿠키에 저장된다. 또는 세션 쿠키에 JWT를 저장할 수 있다. (세션 쿠키는 브라우저 세션 동안만 유지되는 특정 유형의 쿠키, 보통 서버 세션을 관리하기 위해 사용)
근데..... 서버의 세션 저장의 한계가 있는데, 메모리/디스크공간/성능저하/확장성 문제 등이 있다. 방식은 적절하게 선택해서 사용해야 한다.